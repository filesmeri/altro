<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video background</title>
    <meta name="pinterest" content="nohover"></meta>
    <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Londrina+Solid:wght@100;300;400;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
</head>
<body>
    
    <nav id="home" class= flex-container> 
         <!-- The overlay -->
        <div id="myNav" class="overlay">
            <!-- Button to close the overlay navigation -->
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">X</a>                                                
            <!-- Overlay content -->
            <div class="overlay-content">
                <a href="#home" onclick="closeNav()">Home</a>
                <a href="#chiSiamo" onclick="closeNav()">Chi siamo</a>
                <a href="#prodotti" onclick="closeNav()">Prodotti</a>
                <a href="#contatti" onclick="closeNav()">Contatti</a>
            </div>                                                
        </div>

        <div id="navbar">
            <div class="logo">
                <a href="#home"><img src="logo.png" alt="logo"></a> 
            </div>
            <div class="hamburger">
                <a id="hamburger-menu" href="#" onclick="openNav()"><img src="hamburger-02.png" alt="hamburger menu"></a> 
            </div>
            <div class="links">  
                <a href="#home">Home</a>
                <a href="#chiSiamo">Chi siamo</a>
                <a href="#prodotti">Prodotti</a>
                <a href="#contatti">Contatti</a>
            </div>
        </div>
    </nav>  


    <header id="hero" class= flex-container>         
        <div class="video-container">
            <video preload="none" autoplay muted id="myVideo" poster="poster.jpg"  >
                <source src="rape.mp4" type="video/mp4">
                Your browser does not support HTML5 video.
            </video>
        </div>      
        <div onmouseover="addAnimation(this)"  class="title-wrapper">
            <h1 onmouseover="play()">TERRA FELICE</h1>
            <h2  id="anim">Fiesso d'Artico</h2>
            <h3>Verdura biologica a km 0</h2>
        </div>        
    </header>
<!--Chi siamo-->
    <section id="chiSiamo" class="flex-container mt-50">
        <aside class="central-side">
            <div class="zucca left">
                <img src="zucca-rape.png" alt="pumpkin illustration">
            </div>
        </aside>
        <article class="central about-background">            
            <h3 class="section-title">Verdura felice</h3>
            <h4 class="section-subtitle">Terra felice, verdura felice, persone felici!</h4>
            
            <figure class="about-photo">
                <div class="slideshow-container">

                    <!-- Full-width images with number and caption text -->
                    <div class="mySlides fade">
                      <!-- <div class="numbertext">1 / 3</div> -->
                      <img src="slide1.jpg">
                      <!-- <div class="text">Caption Text</div> -->
                    </div>
                    <div class="mySlides fade">
                        <!-- <div class="numbertext">1 / 3</div> -->
                        <img style="top:auto;bottom:0;" src="slide2.jpg">
                        <!-- <div class="text">Caption Text</div> -->
                    </div>
                  
                    <div class="mySlides fade">
                      <!-- <div class="numbertext">2 / 3</div> -->
                      <img src="slide3.jpg">
                      <!-- <div class="text">Caption Two</div> -->
                    </div>
                  
                    <div class="mySlides fade">
                      <!-- <div class="numbertext">3 / 3</div> -->
                      <img src="slide4.jpg">
                      <!-- <div class="text">Caption Three</div> -->
                    </div>
                  
                    <!-- Next and previous buttons -->
                    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                    <a class="next" onclick="plusSlides(1)">&#10095;</a>
                  </div>
                  <br>
                  
                  <!-- The dots/circles -->
                  <div style="text-align:center">
                    <span class="dot" onclick="currentSlide(1)"></span>
                    <span class="dot" onclick="currentSlide(2)"></span>
                    <span class="dot" onclick="currentSlide(3)"></span>
                    <span class="dot" onclick="currentSlide(4)"></span>
                  </div>
                </div>
                  <!-- _______ -->

                <!-- <img src="foto.jpg" alt=""> -->
            </figure>  
            <p class="section-p">
                Ciao! Siamo Fiorella e Flavio, moglie e marito, e tutti i giorni ci prendiamo cura del nostro
                piccolo pezzettino di "terra felice".
                Qui coltiviamo frutta e verdura nel modo pi√π naturale possibile, senza prodotti chimici
                e senza "sbrodeghi". Ci piace il nostro lavoro, ci piace vivere la terra "a piedi nudi" e soppratutto
                ci piace quando venite a trovarci!</p>          
        </article>
        <aside class="central-side">
            <!-- <div class="zucca right">
                <img src="zucca-rape.png" alt="pumpkin illustration">
            </div> -->
        </aside>
    </section>

<!-- Come -->
    <section id="coltivazione" class="flex-container mt-50">
        <aside class="central-side">
            
        </aside>
        <article class="central coltivazione-background">
            <h3 class="section-title">Come coltiviamo</h3>
            <div id="outside-tab-row" class="image-tab-row">
                <div class="image-tab" onclick="expandTab(this);">
                    <a class="tabLink" href="#expanded-container"><img src="verme-01.png" alt="Hummus di lombrico"></a>
                    <a class="tabLink" href="#expanded-container"><h4 class="coltivazione-tab-title">Hummus di lombrico</h4></a>
                    <p class="coltivazione-description">Per concimare la terra usiamo il terriccio prodotto dai nosti piccoli amichetti vermi.</p>
                </div>
                <div class="image-tab" onclick="expandTab(this);">
                    <a class="tabLink" href="#expanded-container"><img src="semi-02.png" alt="Varieta vecchie"></a>
                    <a class="tabLink" href="#expanded-container"><h4 class="coltivazione-tab-title">Sami di varieta vecchie</h4></a>
                    <p class="coltivazione-description">Cerchiamo sempre di perservare la vecchie varieta di semi della nostra terra.</p>
                </div>
                <div class="image-tab" onclick="expandTab(this);">
                    <a class="tabLink" href="#expanded-container"><img src="vangatura-03.png" alt="Suolo felice" ></a>
                    <a class="tabLink" href="#expanded-container"><h4 class="coltivazione-tab-title">Niente vangatura</h4></a>
                    <p class="coltivazione-description">Non vanghiamo la terra ma la ariegiamo per mantenere l'equilibrio del suolo.</p>
                </div>
                <div class="image-tab" onclick="expandTab(this);">
                    <a class="tabLink" href="#expanded-container"><img src="naturale-04.png" alt="Lotta naturale"></a>
                    <a class="tabLink" href="#expanded-container"><h4 class="coltivazione-tab-title">Non usiamo prodotti chimici</h4></a>
                    <p class="coltivazione-description">Non usiamo mai prodotti chimici, ma una lotta naturale contro i parasiti.</p>
                </div>
            </div>
            <div id="tab-tip"><p>Clicca sullle icone per scoprire i modi in cui coltiviamo la nostra verdura naturale.</p></div>
            <div id="expanded-container" class="expanded-image-container">
                <!-- Close the image -->
                <a href="#coltivazione" onclick="closeExpanded()" class="closebtn">&times;</a>
                <div id="inside-tab-row" class="image-tab-row">
                    <div class="image-tab" onclick="expandTab(this);">
                        <img src="verme-01.png" alt="Hummus di lombrico">
                        <h4 class="coltivazione-tab-title">Hummus di lombrico</h4>
                        <p class="coltivazione-description">Per concimare la terra usiamo il terriccio prodotto dai nosti piccoli amichetti vermi.</p>
                    </div>
                    <div class="image-tab" onclick="expandTab(this);">
                        <img src="semi-02.png" alt="Varieta vecchie">
                        <h4 class="coltivazione-tab-title">Sami di varieta vecchie</h4>
                        <p class="coltivazione-description">Cerchiamo sempre di perservare la vecchie varieta di semi della nostra terra.</p>
                    </div>
                    <div class="image-tab" onclick="expandTab(this);">
                        <img src="vangatura-03.png" alt="Suolo felice" >
                        <h4 class="coltivazione-tab-title">Niente vangatura</h4>
                        <p class="coltivazione-description">Non vanghiamo la terra ma la ariegiamo per mantenere l'equilibrio del suolo.</p>
                    </div>
                    <div class="image-tab" onclick="expandTab(this);">
                        <img src="naturale-04.png" alt="Lotta naturale">
                        <h4 class="coltivazione-tab-title">Non usiamo prodotti chimici</h4>
                        <p class="coltivazione-description">Non usiamo mai prodotti chimici, ma una lotta naturale contro i parasiti.</p>
                    </div>
                </div>
                
                <!-- Expanded image -->
                <img id="expandedImg">
              
                <!-- Image text -->
                <h4 id="imgtext"></h4>
                <p id="imgdesc"></p>
              </div>
        </article>
        <aside class="central-side">
            
        </aside>
    </section>

    <!--Prodotti-->
    <section id="prodotti" class="flex-container mt-50">
        <aside class="central-side">
            <div class="zucca left">
                <img src="zucca-rape.png" alt="pumpkin illustration">
            </div>
        </aside>
        <article class="central product-background">            
            <h3 class="section-title">I nostri prodotti</h3>
            <h4 class="section-subtitle">Prodotti di stagione, 100% naturali.</h4>
            
            <figure class="about-photo">
                <div class="product-slideshow-container">
                    <div class="myProducts fade">                      
                      <div class="product-image-wrapper">
                        <img src="verdura-02.png">
                      </div>
                      <div class="product-desc-wrapper">
                        <h4 class="product-title">Verdura di stagione</h4>
                        <p class="product-desc-p">Lorem ipsum dolor sit amet consectetur adipisicing elit. 
                            Recusandae nostrum laborum, quod, incidunt, labore dicta non cupiditate corrupti 
                            nemo placeat commodi in vel consequatur. Repellat cumque libero inventore deleniti 
                            nemo.</p>
                      </div>                      
                    </div>
                    <div class="myProducts fade">                        
                        <div class="product-image-wrapper">
                          <img src="uova.png">
                        </div>
                        <div class="product-desc-wrapper">
                          <h4 class="product-title">Uova di stagione</h4>
                          <p class="product-desc-p">Lorem ipsum dolor sit amet consectetur adipisicing elit. 
                            Recusandae nostrum laborum, quod, incidunt, labore dicta non cupiditate corrupti 
                            nemo placeat commodi in vel consequatur. Repellat cumque libero inventore deleniti 
                            nemo.</p>
                        </div>                        
                    </div>
                  
                    <div class="myProducts fade">                        
                        <div class="product-image-wrapper">
                          <img src="slide3.jpg">
                        </div>
                        <div class="product-desc-wrapper">
                          <h4 class="product-title">Frutta di stagione</h4>
                          <p class="product-desc-p">Lorem ipsum dolor sit amet consectetur adipisicing elit. 
                            Recusandae nostrum laborum, quod, incidunt, labore dicta non cupiditate corrupti 
                            nemo placeat commodi in vel consequatur. Repellat cumque libero inventore deleniti 
                            nemo.</p>
                        </div>                        
                    </div>
                  
                    <div class="myProducts fade">                        
                        <div class="product-image-wrapper">
                          <img src="slide4.jpg">
                        </div>
                        <div class="product-desc-wrapper">
                          <h4 class="product-title">Confetture di stagione</h4>
                          <p class="product-desc-p">Lorem ipsum dolor sit amet consectetur adipisicing elit. 
                            Recusandae nostrum laborum, quod, incidunt, labore dicta non cupiditate corrupti 
                            nemo placeat commodi in vel consequatur. Repellat cumque libero inventore deleniti 
                            nemo.</p>
                        </div>                        
                    </div>
                  </div>
                  <br>
                  
                  <!-- The dots/circles -->
                </div>
                  <!-- _______ -->

                <!-- <img src="foto.jpg" alt=""> -->
            </figure>  
            <div class="product-dots-wrapper">
                <span class="productDot" onclick="currentProduct(0)"><img src="zucca-rape.png" alt=""></span>
                <span class="productDot" onclick="currentProduct(1)"></span>
                <span class="productDot" onclick="currentProduct(2)"></span>
                <span class="productDot" onclick="currentProduct(3)"></span>
              </div>         
        </article>
        <aside class="central-side">
            <!-- <div class="zucca right">
                <img src="zucca-rape.png" alt="pumpkin illustration">
            </div> -->
        </aside>
    </section>


    <div style="margin-top: 500px;">
        <h3>lalala</h3>
        <p>Lorem ipsum dolor sit, 
            amet consectetur adipisicing elit. 
            Enim aliquid quod perspiciatis, hic aut officia? 
            Impedit beatae atque necessitatibus et nesciunt consequatur 
            itaque suscipit ducimus dolorem sapiente omnis, nulla id.</p>
    </div>
    

<script>
    // Video background
    var video = document.getElementById("myVideo");

    function play() {
	    video.play();
    }

    function pause() {
	    video.pause();
    }

    // Scroll up menu
    var prevScrollpos = window.pageYOffset;

    function inactiveNavbar(){
        setTimeout(function(){ 
            var currentScrollPos = window.pageYOffset;
                if (prevScrollpos = currentScrollPos && currentScrollPos>10){
                    document.getElementById("navbar").style.top = "-120px";
                }            
                else {
                    document.getElementById("navbar").style.top = "0";
                }
        }, 5000);
    }
    window.onscroll = function() {
        var currentScrollPos = window.pageYOffset;
        console.log(currentScrollPos);
    
        if (currentScrollPos<10){
            document.getElementById("navbar").style.top = "0";
            document.getElementById("navbar").style.paddingTop = "30px";
            document.getElementById("navbar").style.backgroundColor ="rgb(252, 252, 252, 0)";
        } else if (prevScrollpos > currentScrollPos && currentScrollPos>10) {
            document.getElementById("navbar").style.top = "0"; 
            document.getElementById("navbar").style.paddingTop = "0";   
            document.getElementById("navbar").style.backgroundColor ="#D6E7E4";
            inactiveNavbar();
        } else {
            document.getElementById("navbar").style.top = "-120px";
        }    
        prevScrollpos = currentScrollPos;    
    }


    // Smooth scroll
    const links = document.querySelectorAll("#home .links a, #home .logo a");
        for (const link of links) {
        link.addEventListener("click", clickHandler);
        }

        function clickHandler(e) {
        e.preventDefault();
        const href = this.getAttribute("href");
        const offsetTop = document.querySelector(href).offsetTop-10;

        scroll({
            top: offsetTop,
            behavior: "smooth"
        });
        }

    // Full screen menu
    /* Open */
    function openNav() {
        document.getElementById("myNav").style.height = "100%";
    }
    /* Close */
    function closeNav() {
        document.getElementById("myNav").style.height = "0%";
    } 
    // Slider____________________________       

    var slideIndex = 1;
    showSlides(slideIndex);

    // Next/previous controls
    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    // Thumbnail image controls
    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        if (n > slides.length) {slideIndex = 1}
        if (n < 1) {slideIndex = slides.length}
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex-1].style.display = "block";
        dots[slideIndex-1].className += " active";
    }   

     // image tab - coltivazione____________________________   

         function expandTab(tabs) {
        // Get the outside-tab-row and hide
        document.getElementById("outside-tab-row").style.display="none";
        // Get the expanded image
        var expandImg = document.getElementById("expandedImg");
        expandImg.style.transform="scale(1)";
        // Get the image text
        var imgText = document.getElementById("imgtext");
        // Get the image desc
        var imgDesc = document.getElementById("imgdesc");
        //Get the tab-tip element
        let tabTip = document.getElementById("tab-tip");

        // Get the clicked child p element
        var descElement = tabs.getElementsByTagName("P")[0].innerHTML;
        console.log(descElement);

         // Get the clicked child p element
         var imgElement = tabs.getElementsByTagName("IMG")[0];

        // Use the same src in the expanded image as the image being clicked on from the grid
        expandImg.src = imgElement.src;
        // Use the value of the alt attribute of the clickable image as text inside the expanded image
        imgText.innerHTML = imgElement.alt;
        // Use the value of the clicked tab p element for expanded image description
        imgDesc.innerHTML = descElement;        
        // Show the container element (hidden with CSS)
        expandImg.parentElement.style.display = "flex";
        setTimeout(function(){ 
            expandImg.style.transform="scale(1.1)";
            expandImg.style.opacity="1";
         }, 500);
        // expandImg.style.transform="scale(2)";
        tabTip.style.display="none";
        }  
        
        function closeExpanded() {
            // Get the outside-tab-row and hide
            document.getElementById("outside-tab-row").style.display="flex";
            let expandedImg = document.getElementById("expandedImg");
            let expandedImgContainer = expandedImg.parentElement;
            let tabTip = document.getElementById('tab-tip');
            expandedImgContainer.style.display='none'; 
            expandedImg.style.transform="scale(1)";
            tabTip.style.display='block';
        }

    // Product slider

        var productIndex = 0;
        var productDots = document.getElementsByClassName("productDot");
        showProducts();
        var dotisClicked = false;
        var interval;

        // Thumbnail image controls
        function currentProduct(n) {
            clearInterval(interval);
            var productDots = document.getElementsByClassName("productDot");
            showProducts(productIndex = n);
            productDots[n].className += " active";
            dotisClicked = true;
            setTimeout(function(){
                dotisClicked=false;
                interval = setInterval(showProducts,5000);
            }, 10000);
        }

        if(!dotisClicked){
        interval = setInterval(showProducts, 5000); // Change image every 2 seconds
        productDots[productIndex-1].className += " active";
        }
        else {
                        
        }

        function showProducts() {
        var i;
        var j;
        var slides = document.getElementsByClassName("myProducts");
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        productIndex++;
        if (productIndex > slides.length) {productIndex = 1}
        for (j = 0; j < productDots.length; j++) {
            productDots[j].className = productDots[j].className.replace(" active", "");
        }
        productDots[productIndex-1].className += " active";
        slides[productIndex-1].style.display = "flex";
        
        }
    

    // Onload scroll position___________
    // to use recorded scroll position
    // document.addEventListener("DOMContentLoaded", function(event) { 
    //     var scrollpos = localStorage.getItem('scrollpos');
    //     if (scrollpos) {window.scrollTo(0, scrollpos)};
    // });

    // to go to top
    document.addEventListener("DOMContentLoaded", function(event) { 
        window.scrollTo(0, 0);
    });

    // set scroll position before exiting the page
    window.onbeforeunload = function(e) {
        localStorage.setItem('scrollpos', window.scrollY);
        if (localStorage.scrollpos<250){
            localStorage.setItem('scrollpos', 0);
        }
    };

    function addAnimation(element){
        element.classList.add('animate__animated', 'animate__zoomIn');        
    };

</script>
    
</body>
</html>
